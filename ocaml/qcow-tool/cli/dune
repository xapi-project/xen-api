(executable
  (name main)
  (libraries
    astring
    cmdliner
    cstruct
    cstruct-lwt
    fmt
    io-page logs
    logs.fmt
    lwt
    lwt.unix
    mirage-block
    mirage-block-unix
    mirage-block-combinators
    mirage-time
    qcow
    sexplib
    sha
    unix-type-representations
    )
  (preprocess
    (pps ppx_sexp_conv)
  )
)

(install
  (package qcow-tool)
  (section bin)
  (files (main.exe as qcow-tool))
)
